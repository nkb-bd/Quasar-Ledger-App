(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{ab55:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{ref:"pageChat",staticClass:"flex column page-chat"},[e.otherUserDetails.online?e._e():s("q-banner",{staticClass:"fixed-top bg-grey-4 text-center"},[e._v("\n    "+e._s(e.otherUserDetails.name)+" is offline.\n\n    "+e._s(e.newMessage)+"\n  ")]),e.loading?e._e():s("div",{staticClass:"fixed-top bg-grey-4 text-center"},[s("div",{staticClass:"q-gutter-md row justify-center"},[s("q-spinner-puff",{attrs:{color:"primary",size:"2em"}})],1)]),s("div",{staticClass:"q-pa-md column col justify-end"},e._l(e.messages,(function(t,r){return s("q-chat-message",{key:t.key,class:{invisible:!e.showMessages},attrs:{name:"me"==t.from?e.userDetails.name:e.otherUserDetails.name,text:[t.text],sent:"me"==t.from,"bg-color":"me"==t.from?"white":"light-green-2",stamp:e.messageDate(t.created)}})})),1),s("q-footer",{attrs:{elevated:""}},[s("q-toolbar",[s("q-form",{staticClass:"full-width",on:{submit:e.sendMessage}},[s("q-input",{ref:"chatInput",attrs:{"bg-color":"white",outlined:"",rounded:"",autofocus:"",label:"Message",dense:""},on:{blur:e.scrollToBottom},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",type:"submit",color:"white",icon:"send"},on:{click:e.sendMessage}})]},proxy:!0}]),model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}})],1)],1)],1)],1)},a=[],n=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),o=s.n(n),i=s("2f62"),c=(s("7001"),s("b612")),u=s("bd4c");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){o()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={mixins:[c["a"]],data:function(){return{newMessage:"",showMessages:!1,loading:!0}},methods:f({},Object(i["b"])("LedgerStore",["firebaseGetMessages","firebaseStopGettingMessages","firebaseSendMessage"]),{sendMessage:function(){""!=this.newMessage&&(this.firebaseSendMessage({message:{text:this.newMessage,from:"me"},otherUserId:this.$route.params.otherUserId}),this.newMessage="",this.$refs.chatInput.$el.focus())},scrollToBottom:function(){var e=this.$refs.pageChat.$el;setTimeout((function(){window.scrollTo(0,e.scrollHeight)}),20)},messageDate:function(e){return u["a"].formatDate(e," DD MMMM YYYY hh:mm A")}}),computed:f({},Object(i["d"])("LedgerStore",["messages","userDetails"])),mounted:function(){this.firebaseGetMessages(this.$route.params.otherUserId),this.loading=!1},destroyed:function(){this.firebaseStopGettingMessages()},watch:{messages:function(e){var t=this;Object.keys(e).length&&(this.scrollToBottom(),setTimeout((function(){t.showMessages=!0}),100))}}},d=g,h=(s("ac93"),s("2877")),m=s("eebe"),p=s.n(m),b=s("9989"),w=s("54e1"),M=s("06d5"),y=s("8169"),O=s("7ff0"),j=s("65c6"),v=s("0378"),D=s("27f9"),x=s("9c40"),S=Object(h["a"])(d,r,a,!1,null,null,null);t["default"]=S.exports;p()(S,"components",{QPage:b["a"],QBanner:w["a"],QSpinnerPuff:M["a"],QChatMessage:y["a"],QFooter:O["a"],QToolbar:j["a"],QForm:v["a"],QInput:D["a"],QBtn:x["a"]})},ac93:function(e,t,s){"use strict";var r=s("d79d"),a=s.n(r);a.a},b612:function(e,t,s){"use strict";t["a"]={computed:{otherUserDetails:function(){return this.$store.state.LedgerStore.users[this.$route.params.otherUserId]?this.$store.state.LedgerStore.users[this.$route.params.otherUserId]:{}}}}},d79d:function(e,t,s){}}]);